<%= render 'navigation' %>
<div class="container">
  <%= render 'layouts/messages' %>

  <div class="row">
    <div class="col-md my-3">
      <div class="card">
        <% if @product.image.attached? %>
          <%= image_tag url_for(@product.image), class: "card-img-top", alt: @product.name %>
        <% end %>
      </div>
    </div>

    <div class="col-md my-3">
      <h1><%= @product.name %></h1>
      <h4>$<%= @product.price %></h4>
      <br>

      <% if @product.description.present? %>
        <h5>Description:</h5>
        <p><%= @product.description %></p>
      <% end %>

      <h5>Category: <%= @product.category.display_name %></h5>
      <br>
      <h5>Sizes:</h5>

      <% @sizes.each do |size| %>
        <% product_size = @product.product_sizes.find_by(size: size) %>
        
        <% if product_size && product_size.quantity > 0 %>
          <a href="#" class="btn btn-outline-dark size-btn" data-size="<%= size.id %>" data-quantity="<%= product_size.quantity %>"><%= size.display_name %></a>
        <% else %>
          <a href="#" class="btn btn-outline-dark size-btn disabled" aria-disabled="true" data-size="<%= size.id %>" data-quantity="0"><%= size.display_name %></a>
        <% end %>
      <% end %>

      <br>
      <br>
      <h5>Quantity:</h5>
      <input type="number" id="quantity" name="quantity" value="1" min="1" class="form-control w-25" readonly>
      <input type="hidden" id="selected-size" name="selected_size" value="">
      <br>
      <%= link_to "Return", :back, class: 'btn btn-danger' %>
      <a href="#" id="add-to-cart" class="btn btn-primary">Add to Cart</a>
    </div>
  </div>
</div>
